

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Inventory Plugins &mdash; Ansible Documentation</title>
  

  
  
  
  
    <link rel="canonical" href="https://docs.ansible.com/ansible/latest/plugins/inventory.html"/>
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>
  <link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.min.css' rel='stylesheet' type='text/css'>

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/ansible.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/ansible.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="advanced_host_list – Parses a ‘host list’ with ranges" href="inventory/advanced_host_list.html" />
    <link rel="prev" title="winrm – Run tasks over Microsoft’s WinRM" href="connection/winrm.html" /> <!---- extra head elements for Ansible beyond RTD Sphinx Theme --->
<script type="text/javascript" src="//www.redhat.com/dtm.js"></script>
<!-- <meta class="swiftype" name="published_at" data-type="date" content="2017-12-13" /> -->
<meta class="swiftype" name="version" data-type="string" content="devel">

<!-- Google Tag Manager Data Layer -->
<script>
 dataLayer = [];
</script>
<!-- End Google Tag Manager Data Layer -->

<script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script> 
</head>

<body class="wy-body-for-nav">
   <!---- extra body elements for Ansible beyond RTD Sphinx Theme --->
<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PSB293" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-PSB293');</script>
<!-- End Google Tag Manager -->

  <div class="DocSite-globalNav ansibleNav">
      <ul>
          <li><a href="https://www.ansible.com/ansiblefest" target="_blank">AnsibleFest</a></li>
          <li><a href="https://www.ansible.com/tower" target="_blank">Products</a></li>
          <li><a href="https://www.ansible.com/community" target="_blank">Community</a></li>
          <li><a href="https://www.ansible.com/webinars-training" target="_blank">Webinars & Training</a></li>
          <li><a href="https://www.ansible.com/blog" target="_blank">Blog</a></li>
      </ul>
  </div>

<a class="DocSite-nav" href="/" style="padding-bottom: 30px;">

  <img class="DocSiteNav-logo"
    src="../_static/images/logo_invert.png"
    alt="Ansible Logo">
  <div class="DocSiteNav-title">
    Documentation
  </div>
</a> 
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Ansible
          

          
          </a>

          
            
            
              <div class="version">
                devel
              </div>
            
          

          <!--- Based on https://github.com/rtfd/sphinx_rtd_theme/pull/438/files -->

<div class="version">
  
    <div class="version-dropdown">
      <select class="version-list" id="version-list" onchange="javascript:location.href = this.value;">
        <script> x = document.getElementById("version-list"); </script>
        
          <script>
            current_url = window.location.href;
            option = document.createElement("option");
            option.text = "latest";
            if ( "latest" == "devel" ) {
              option.selected = true;
            }
            if (current_url.search("devel") > -1) {
              option.value = current_url.replace("devel","latest");
            } else {
              option.value = current_url.replace("latest","latest");
            }
            x.add(option);
          </script>
        
          <script>
            current_url = window.location.href;
            option = document.createElement("option");
            option.text = "2.8";
            if ( "2.8" == "devel" ) {
              option.selected = true;
            }
            if (current_url.search("devel") > -1) {
              option.value = current_url.replace("devel","2.8");
            } else {
              option.value = current_url.replace("latest","2.8");
            }
            x.add(option);
          </script>
        
          <script>
            current_url = window.location.href;
            option = document.createElement("option");
            option.text = "2.7";
            if ( "2.7" == "devel" ) {
              option.selected = true;
            }
            if (current_url.search("devel") > -1) {
              option.value = current_url.replace("devel","2.7");
            } else {
              option.value = current_url.replace("latest","2.7");
            }
            x.add(option);
          </script>
        
          <script>
            current_url = window.location.href;
            option = document.createElement("option");
            option.text = "devel";
            if ( "devel" == "devel" ) {
              option.selected = true;
            }
            if (current_url.search("devel") > -1) {
              option.value = current_url.replace("devel","devel");
            } else {
              option.value = current_url.replace("latest","devel");
            }
            x.add(option);
          </script>
        
      </select>
    </div>
  
</div>
          
<div role="search">
<!--  <form id="rtd-search-form" class="wy-form" action="../search.html" -->
  <form id="rtd-search-form" class="wy-form"  method="get">
    <input type="text" class="st-default-search-input" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation, Upgrade &amp; Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation_guide/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../porting_guides/porting_guides.html">Ansible Porting Guides</a></li>
</ul>
<p class="caption"><span class="caption-text">Using Ansible</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../user_guide/index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../user_guide/quickstart.html">Ansible Quickstart Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/basic_concepts.html">Ansible concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/intro_getting_started.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/intro_inventory.html">How to build your inventory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/intro_dynamic_inventory.html">Working with dynamic inventory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/intro_patterns.html">Patterns: targeting hosts and groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/intro_adhoc.html">Introduction to ad-hoc commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/connection_details.html">Connection methods and details</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/command_line_tools.html">Working with command line tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/playbooks.html">Working With Playbooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/become.html">Understanding privilege escalation: become</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/vault.html">Ansible Vault</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/sample_setup.html">Sample Ansible setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/modules.html">Working With Modules</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="plugins.html">Working With Plugins</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="action.html">Action Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="become.html">Become Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="cache.html">Cache Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="callback.html">Callback Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="connection.html">Connection Plugins</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Inventory Plugins</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#enabling-inventory-plugins">Enabling inventory plugins</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-inventory-plugins">Using inventory plugins</a></li>
<li class="toctree-l4"><a class="reference internal" href="#plugin-list">Plugin List</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="lookup.html">Lookup Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="shell.html">Shell Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="strategy.html">Strategy Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="vars.html">Vars Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user_guide/playbooks_filters.html">Filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user_guide/playbooks_tests.html">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user_guide/plugin_filtering_config.html">Plugin Filter Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/intro_bsd.html">Ansible and BSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/windows.html">Windows Guides</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/collections_using.html">Using collections</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Contributing to Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">Ansible Community Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Extending Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/index.html">Developer Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Common Ansible Scenarios</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/cloud_guides.html">Public Cloud Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/network_guides.html">Network Technology Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/virt_guides.html">Virtualization and Containerization Guides</a></li>
</ul>
<p class="caption"><span class="caption-text">Network Automation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../network/getting_started/index.html">Network Automation Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network/user_guide/index.html">Network Automation Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network/dev_guide/index.html">Network Automation Developer Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Ansible Galaxy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../galaxy/user_guide.html">Galaxy User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../galaxy/dev_guide.html">Galaxy Developer Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference &amp; Appendices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/modules_by_category.html">Module Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/playbooks_keywords.html">Playbook Keywords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/common_return_values.html">Return Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/config.html">Ansible Configuration Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/general_precedence.html">Controlling how Ansible behaves: precedence rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/YAMLSyntax.html">YAML Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/python_3_support.html">Python 3 Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/interpreter_discovery.html">Interpreter Discovery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/release_and_maintenance.html">Release and maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/test_strategies.html">Testing Strategies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/testing/sanity/index.html">Sanity Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/module_utils.html">Ansible Reference: Module Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/special_variables.html">Special Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/tower.html">Red Hat Ansible Tower</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/automationhub.html">Ansible Automation Hub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/logging.html">Logging Ansible output</a></li>
</ul>
<p class="caption"><span class="caption-text">Roadmaps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../roadmap/index.html">Ansible Roadmap</a></li>
</ul>

            
          
        </div>
        
         <!-- extra nav elements for Ansible beyond RTD Sphinx Theme --->
<!-- changeable widget links to tower - do not change as image controlled by Ansible-->
<div id="sideBanner">
  <br/>
  <a href="https://www.ansible.com/docs-left?utm_source=docs">
    <img style="border-width:0px;" src="https://cdn2.hubspot.net/hubfs/330046/docs-graphics/ASB-docs-left-rail.png" />
  </a>
  <br/><br/><br/>
</div>
      </div>
    </nav>
  </div>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Ansible</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          
















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../user_guide/index.html">User Guide</a> &raquo;</li>
        
          <li><a href="../user_guide/playbooks.html">Working With Playbooks</a> &raquo;</li>
        
          <li><a href="../user_guide/playbooks_special_topics.html">Advanced Playbooks Features</a> &raquo;</li>
        
          <li><a href="plugins.html">Working With Plugins</a> &raquo;</li>
        
      <li>Inventory Plugins</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <!-- Ansible-specific additions for modules etc -->
                
                  <a href="https://github.com/ansible/ansible/edit/devel/docs/docsite/rst/plugins/inventory.rst?description=%23%23%23%23%23%20SUMMARY%0A%3C!---%20Your%20description%20here%20--%3E%0A%0A%0A%23%23%23%23%23%20ISSUE%20TYPE%0A-%20Docs%20Pull%20Request%0A%0A%2Blabel:%20docsite_pr" class="fa fa-github"> Edit on GitHub</a>
                
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <!--- Based on sphinx versionwarning extension. Extension currently only works on READTHEDOCS -->
  <script>
    // Create a banner if we're not on the official docs site
    if (location.host == "docs.testing.ansible.com") {
      document.write('<div id="testing_banner_id" class="admonition important">');
      para = document.createElement('p');
      banner_text=document.createTextNode("This is a testing site. For the official docs go to https://docs.ansible.com/");
      para.appendChild(banner_text);
      element = document.getElementById('testing_banner_id');
      element.appendChild(para);
      document.write('</div>');
    }

    // Create a banner if we're not the latest version
    current_url = window.location.href;
    if ((current_url.search("latest") > -1) || (current_url.search("/2.9/") > -1)) {
     // no banner for latest release
    } else if (current_url.search("devel") > -1) {
      document.write('<div id="banner_id" class="admonition caution">');
      para = document.createElement('p');
      banner_text=document.createTextNode("You are reading the *devel* version of the Ansible documentation - this version is not guaranteed stable. Use the version selection to the left if you want the latest stable released version.");
      para.appendChild(banner_text);
      element = document.getElementById('banner_id');
      element.appendChild(para);
      document.write('</div>');
    } else {
      document.write('<div id="banner_id" class="admonition caution">');
      para = document.createElement('p');
      banner_text=document.createTextNode("You are reading an older version of the Ansible documentation. Use the version selection to the left if you want the latest stable released version.");
      para.appendChild(banner_text);
      element = document.getElementById('banner_id');
      element.appendChild(para);
      document.write('</div>');
    }
  </script>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="inventory-plugins">
<span id="id1"></span><h1>Inventory Plugins<a class="headerlink" href="#inventory-plugins" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#enabling-inventory-plugins" id="id2">Enabling inventory plugins</a></li>
<li><a class="reference internal" href="#using-inventory-plugins" id="id3">Using inventory plugins</a></li>
<li><a class="reference internal" href="#plugin-list" id="id4">Plugin List</a></li>
</ul>
</div>
<p>Inventory plugins allow users to point at data sources to compile the inventory of hosts that Ansible uses to target tasks, either via the <code class="docutils literal notranslate"><span class="pre">-i</span> <span class="pre">/path/to/file</span></code> and/or <code class="docutils literal notranslate"><span class="pre">-i</span> <span class="pre">'host1,</span> <span class="pre">host2'</span></code> command line parameters or from other configuration sources.</p>
<div class="section" id="enabling-inventory-plugins">
<span id="enabling-inventory"></span><h2><a class="toc-backref" href="#id2">Enabling inventory plugins</a><a class="headerlink" href="#enabling-inventory-plugins" title="Permalink to this headline">¶</a></h2>
<p>Most inventory plugins shipped with Ansible are disabled by default and need to be whitelisted in your
<a class="reference internal" href="../reference_appendices/config.html#ansible-configuration-settings"><span class="std std-ref">ansible.cfg</span></a> file in order to function.  This is how the default whitelist looks in the
config file that ships with Ansible:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[inventory]</span>
<span class="na">enable_plugins</span> <span class="o">=</span> <span class="s">host_list, script, auto, yaml, ini, toml</span>
</pre></div>
</div>
<p>This list also establishes the order in which each plugin tries to parse an inventory source. Any plugins left out of the list will not be considered, so you can ‘optimize’ your inventory loading by minimizing it to what you actually use. For example:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[inventory]</span>
<span class="na">enable_plugins</span> <span class="o">=</span> <span class="s">advanced_host_list, constructed, yaml</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">auto</span></code> inventory plugin can be used to automatically determines which inventory plugin to use for a YAML configuration file. It can also be used for inventory plugins in a collection.</p>
<p>To whitelist specific inventory plugins in a collection you need to use the fully qualified name:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[inventory]</span>
<span class="na">enable_plugins</span> <span class="o">=</span> <span class="s">namespace.collection_name.inventory_plugin_name</span>
</pre></div>
</div>
</div>
<div class="section" id="using-inventory-plugins">
<span id="using-inventory"></span><h2><a class="toc-backref" href="#id3">Using inventory plugins</a><a class="headerlink" href="#using-inventory-plugins" title="Permalink to this headline">¶</a></h2>
<p>The only requirement for using an inventory plugin after it is enabled is to provide an inventory source to parse.
Ansible will try to use the list of enabled inventory plugins, in order, against each inventory source provided.
Once an inventory plugin succeeds at parsing a source, any remaining inventory plugins will be skipped for that source.</p>
<p>To start using an inventory plugin with a YAML configuration source, create a file with the accepted filename schema for the plugin in question, then add <code class="docutils literal notranslate"><span class="pre">plugin:</span> <span class="pre">plugin_name</span></code>. Each plugin documents any naming restrictions. For example, the aws_ec2 inventory plugin has to end with <code class="docutils literal notranslate"><span class="pre">aws_ec2.(yml|yaml)</span></code></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># demo.aws_ec2.yml</span>
<span class="l l-Scalar l-Scalar-Plain">plugin</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">aws_ec2</span>
</pre></div>
</div>
<p>Or for the openstack plugin the file has to be called <code class="docutils literal notranslate"><span class="pre">clouds.yml</span></code> or <code class="docutils literal notranslate"><span class="pre">openstack.(yml|yaml)</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># clouds.yml or openstack.(yml|yaml)</span>
<span class="l l-Scalar l-Scalar-Plain">plugin</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">openstack</span>
</pre></div>
</div>
<p>To use a plugin in a collection provide the fully qualified name:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">plugin</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">namespace.collection_name.inventory_plugin_name</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">auto</span></code> inventory plugin is enabled by default and works by using the <code class="docutils literal notranslate"><span class="pre">plugin</span></code> field to indicate the plugin that should attempt to parse it. You can configure the whitelist/precedence of inventory plugins used to parse source using the <cite>ansible.cfg</cite> [‘inventory’] <code class="docutils literal notranslate"><span class="pre">enable_plugins</span></code> list. After enabling the plugin and providing any required options, you can view the populated inventory with <code class="docutils literal notranslate"><span class="pre">ansible-inventory</span> <span class="pre">-i</span> <span class="pre">demo.aws_ec2.yml</span> <span class="pre">--graph</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>@all:
  |--@aws_ec2:
  |  |--ec2-12-345-678-901.compute-1.amazonaws.com
  |  |--ec2-98-765-432-10.compute-1.amazonaws.com
  |--@ungrouped:
</pre></div>
</div>
<p>If you are using an inventory plugin in a playbook-adjacent collection and want to test your setup with <code class="docutils literal notranslate"><span class="pre">ansible-inventory</span></code>, you will need to use the <code class="docutils literal notranslate"><span class="pre">--playbook-dir</span></code> flag.</p>
<p>You can set the default inventory path (via <code class="docutils literal notranslate"><span class="pre">inventory</span></code> in the <cite>ansible.cfg</cite> [defaults] section or the <span class="target" id="index-0"></span><a class="reference internal" href="../reference_appendices/config.html#envvar-ANSIBLE_INVENTORY"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">ANSIBLE_INVENTORY</span></code></a> environment variable) to your inventory source(s). Now running <code class="docutils literal notranslate"><span class="pre">ansible-inventory</span> <span class="pre">--graph</span></code> should yield the same output as when you passed your YAML configuration source(s) directly. You can add custom inventory plugins to your plugin path to use in the same way.</p>
<p>Your inventory source might be a directory of inventory configuration files. The constructed inventory plugin only operates on those hosts already in inventory, so you may want the constructed inventory configuration parsed at a particular point (such as last). Ansible parses the directory recursively, alphabetically. You cannot configure the parsing approach, so name your files to make it work predictably. Inventory plugins that extend constructed features directly can work around that restriction by adding constructed options in addition to the inventory plugin options. Otherwise, you can use <code class="docutils literal notranslate"><span class="pre">-i</span></code> with multiple sources to impose a specific order, e.g. <code class="docutils literal notranslate"><span class="pre">-i</span> <span class="pre">demo.aws_ec2.yml</span> <span class="pre">-i</span> <span class="pre">clouds.yml</span> <span class="pre">-i</span> <span class="pre">constructed.yml</span></code>.</p>
<p>You can create dynamic groups using host variables with the constructed <code class="docutils literal notranslate"><span class="pre">keyed_groups</span></code> option. The option <code class="docutils literal notranslate"><span class="pre">groups</span></code> can also be used to create groups and <code class="docutils literal notranslate"><span class="pre">compose</span></code> creates and modifies host variables. Here is an aws_ec2 example utilizing constructed features:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># demo.aws_ec2.yml</span>
<span class="l l-Scalar l-Scalar-Plain">plugin</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">aws_ec2</span>
<span class="l l-Scalar l-Scalar-Plain">regions</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">us-east-1</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">us-east-2</span>
<span class="l l-Scalar l-Scalar-Plain">keyed_groups</span><span class="p p-Indicator">:</span>
  <span class="c1"># add hosts to tag_Name_value groups for each aws_ec2 host&#39;s tags.Name variable</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">key</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">tags.Name</span>
    <span class="l l-Scalar l-Scalar-Plain">prefix</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">tag_Name_</span>
    <span class="l l-Scalar l-Scalar-Plain">separator</span><span class="p p-Indicator">:</span> <span class="s">&quot;&quot;</span>
<span class="l l-Scalar l-Scalar-Plain">groups</span><span class="p p-Indicator">:</span>
  <span class="c1"># add hosts to the group development if any of the dictionary&#39;s keys or values is the word &#39;devel&#39;</span>
  <span class="l l-Scalar l-Scalar-Plain">development</span><span class="p p-Indicator">:</span> <span class="s">&quot;&#39;devel&#39;</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">(tags|list)&quot;</span>
<span class="l l-Scalar l-Scalar-Plain">compose</span><span class="p p-Indicator">:</span>
  <span class="c1"># set the ansible_host variable to connect with the private IP address without changing the hostname</span>
  <span class="l l-Scalar l-Scalar-Plain">ansible_host</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">private_ip_address</span>
</pre></div>
</div>
<p>Now the output of <code class="docutils literal notranslate"><span class="pre">ansible-inventory</span> <span class="pre">-i</span> <span class="pre">demo.aws_ec2.yml</span> <span class="pre">--graph</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>@all:
  |--@aws_ec2:
  |  |--ec2-12-345-678-901.compute-1.amazonaws.com
  |  |--ec2-98-765-432-10.compute-1.amazonaws.com
  |  |--...
  |--@development:
  |  |--ec2-12-345-678-901.compute-1.amazonaws.com
  |  |--ec2-98-765-432-10.compute-1.amazonaws.com
  |--@tag_Name_ECS_Instance:
  |  |--ec2-98-765-432-10.compute-1.amazonaws.com
  |--@tag_Name_Test_Server:
  |  |--ec2-12-345-678-901.compute-1.amazonaws.com
  |--@ungrouped
</pre></div>
</div>
<p>If a host does not have the variables in the configuration above (i.e. <code class="docutils literal notranslate"><span class="pre">tags.Name</span></code>, <code class="docutils literal notranslate"><span class="pre">tags</span></code>, <code class="docutils literal notranslate"><span class="pre">private_ip_address</span></code>), the host will not be added to groups other than those that the inventory plugin creates and the <code class="docutils literal notranslate"><span class="pre">ansible_host</span></code> host variable will not be modified.</p>
<p>If an inventory plugin supports caching, you can enable and set caching options for an individual YAML configuration source or for multiple inventory sources using environment variables or Ansible configuration files. If you enable caching for an inventory plugin without providing inventory-specific caching options, the inventory plugin will use fact-caching options. Here is an example of enabling caching for an individual YAML configuration file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># demo.aws_ec2.yml</span>
<span class="l l-Scalar l-Scalar-Plain">plugin</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">aws_ec2</span>
<span class="l l-Scalar l-Scalar-Plain">cache</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">yes</span>
<span class="l l-Scalar l-Scalar-Plain">cache_plugin</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">jsonfile</span>
<span class="l l-Scalar l-Scalar-Plain">cache_timeout</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">7200</span>
<span class="l l-Scalar l-Scalar-Plain">cache_connection</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/tmp/aws_inventory</span>
<span class="l l-Scalar l-Scalar-Plain">cache_prefix</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">aws_ec2</span>
</pre></div>
</div>
<p>Here is an example of setting inventory caching with some fact caching defaults for the cache plugin used and the timeout in an <code class="docutils literal notranslate"><span class="pre">ansible.cfg</span></code> file:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[defaults]</span>
<span class="na">fact_caching</span> <span class="o">=</span> <span class="s">jsonfile</span>
<span class="na">fact_caching_connection</span> <span class="o">=</span> <span class="s">/tmp/ansible_facts</span>
<span class="na">cache_timeout</span> <span class="o">=</span> <span class="s">3600</span>

<span class="k">[inventory]</span>
<span class="na">cache</span> <span class="o">=</span> <span class="s">yes</span>
<span class="na">cache_connection</span> <span class="o">=</span> <span class="s">/tmp/ansible_inventory</span>
</pre></div>
</div>
<p>Besides cache plugins shipped with Ansible, cache plugins eligible for caching inventory can also reside in a custom cache plugin path. Cache plugins in collections are not supported yet for inventory.</p>
</div>
<div class="section" id="plugin-list">
<span id="inventory-plugin-list"></span><h2><a class="toc-backref" href="#id4">Plugin List</a><a class="headerlink" href="#plugin-list" title="Permalink to this headline">¶</a></h2>
<p>You can use <code class="docutils literal notranslate"><span class="pre">ansible-doc</span> <span class="pre">-t</span> <span class="pre">inventory</span> <span class="pre">-l</span></code> to see the list of available plugins.
Use <code class="docutils literal notranslate"><span class="pre">ansible-doc</span> <span class="pre">-t</span> <span class="pre">inventory</span> <span class="pre">&lt;plugin</span> <span class="pre">name&gt;</span></code> to see plugin-specific documentation and examples.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="inventory/advanced_host_list.html">advanced_host_list – Parses a ‘host list’ with ranges</a></li>
<li class="toctree-l1"><a class="reference internal" href="inventory/auto.html">auto – Loads and executes an inventory plugin specified in a YAML config</a></li>
<li class="toctree-l1"><a class="reference internal" href="inventory/constructed.html">constructed – Uses Jinja2 to construct vars and groups based on existing inventory</a></li>
<li class="toctree-l1"><a class="reference internal" href="inventory/generator.html">generator – Uses Jinja2 to construct hosts and groups from patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="inventory/host_list.html">host_list – Parses a ‘host list’ string</a></li>
<li class="toctree-l1"><a class="reference internal" href="inventory/ini.html">ini – Uses an Ansible INI file as inventory source</a></li>
<li class="toctree-l1"><a class="reference internal" href="inventory/script.html">script – Executes an inventory script that returns JSON</a></li>
<li class="toctree-l1"><a class="reference internal" href="inventory/toml.html">toml – Uses a specific TOML file as an inventory source</a></li>
<li class="toctree-l1"><a class="reference internal" href="inventory/yaml.html">yaml – Uses a specific YAML file as an inventory source</a></li>
</ul>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="../user_guide/playbooks_intro.html#about-playbooks"><span class="std std-ref">Intro to Playbooks</span></a></dt>
<dd>An introduction to playbooks</dd>
<dt><a class="reference internal" href="callback.html#callback-plugins"><span class="std std-ref">Callback Plugins</span></a></dt>
<dd>Ansible callback plugins</dd>
<dt><a class="reference internal" href="connection.html#connection-plugins"><span class="std std-ref">Connection Plugins</span></a></dt>
<dd>Ansible connection plugins</dd>
<dt><a class="reference internal" href="../user_guide/playbooks_filters.html#playbooks-filters"><span class="std std-ref">Filters</span></a></dt>
<dd>Jinja2 filter plugins</dd>
<dt><a class="reference internal" href="../user_guide/playbooks_tests.html#playbooks-tests"><span class="std std-ref">Tests</span></a></dt>
<dd>Jinja2 test plugins</dd>
<dt><a class="reference internal" href="../user_guide/playbooks_lookups.html#playbooks-lookups"><span class="std std-ref">Lookups</span></a></dt>
<dd>Jinja2 lookup plugins</dd>
<dt><a class="reference internal" href="vars.html#vars-plugins"><span class="std std-ref">Vars Plugins</span></a></dt>
<dd>Ansible vars plugins</dd>
<dt><a class="reference external" href="https://groups.google.com/group/ansible-devel">User Mailing List</a></dt>
<dd>Have a question?  Stop by the google group!</dd>
<dt><a class="reference external" href="http://irc.freenode.net">irc.freenode.net</a></dt>
<dd>#ansible IRC chat channel</dd>
</dl>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons">
      
        <a href="inventory/advanced_host_list.html" class="btn btn-neutral float-right" title="advanced_host_list – Parses a ‘host list’ with ranges"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="connection/winrm.html" class="btn btn-neutral" title="winrm – Run tasks over Microsoft’s WinRM"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>


<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','yABGvz2N8PwcwBxyfzUc','2.0.0');
</script>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019 Red Hat, Inc.
      <span class="lastupdated">
        Last updated on Aug 10, 2020.
      </span>

    </p>
  </div> 
</footer>
        </div>
      </div>

    </section>

  </div>

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script>

  
  
    
   <!-- extra footer elements for Ansible beyond RTD Sphinx Theme --->
<!-- begin analytics -->
<script type="text/javascript">
var _hsq = _hsq || [];
_hsq.push(["setContentType", "standard-page"]);
      (function(d,s,i,r) {
      if (d.getElementById(i)){return;}
      var n = d.createElement(s),e = document.getElementsByTagName(s)[0];
      n.id=i;n.src = '//js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/330046.js';
      e.parentNode.insertBefore(n, e);
      })(document, "script", "hs-analytics",300000);
</script>
<!-- end analytics -->
<script type="text/javascript">
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
  _satellite.pageBottom();
}
</script> 

</body>
</html>