

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Module format and documentation &mdash; Ansible Documentation</title>
  

  
  
  
  
    <link rel="canonical" href="https://docs.ansible.com/ansible/latest/dev_guide/developing_modules_documenting.html"/>
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>
  <link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.min.css' rel='stylesheet' type='text/css'>

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/ansible.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/ansible.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Windows module development walkthrough" href="developing_modules_general_windows.html" />
    <link rel="prev" title="Debugging modules" href="debugging.html" /> <!---- extra head elements for Ansible beyond RTD Sphinx Theme --->
<script type="text/javascript" src="//www.redhat.com/dtm.js"></script>
<!-- <meta class="swiftype" name="published_at" data-type="date" content="2017-12-13" /> -->
<meta class="swiftype" name="version" data-type="string" content="devel">

<!-- Google Tag Manager Data Layer -->
<script>
 dataLayer = [];
</script>
<!-- End Google Tag Manager Data Layer -->

<script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script> 
</head>

<body class="wy-body-for-nav">
   <!---- extra body elements for Ansible beyond RTD Sphinx Theme --->
<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PSB293" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-PSB293');</script>
<!-- End Google Tag Manager -->

  <div class="DocSite-globalNav ansibleNav">
      <ul>
          <li><a href="https://www.ansible.com/ansiblefest" target="_blank">AnsibleFest</a></li>
          <li><a href="https://www.ansible.com/tower" target="_blank">Products</a></li>
          <li><a href="https://www.ansible.com/community" target="_blank">Community</a></li>
          <li><a href="https://www.ansible.com/webinars-training" target="_blank">Webinars & Training</a></li>
          <li><a href="https://www.ansible.com/blog" target="_blank">Blog</a></li>
      </ul>
  </div>

<a class="DocSite-nav" href="/" style="padding-bottom: 30px;">

  <img class="DocSiteNav-logo"
    src="../_static/images/logo_invert.png"
    alt="Ansible Logo">
  <div class="DocSiteNav-title">
    Documentation
  </div>
</a> 
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Ansible
          

          
          </a>

          
            
            
              <div class="version">
                devel
              </div>
            
          

          <!--- Based on https://github.com/rtfd/sphinx_rtd_theme/pull/438/files -->

<div class="version">
  
    <div class="version-dropdown">
      <select class="version-list" id="version-list" onchange="javascript:location.href = this.value;">
        <script> x = document.getElementById("version-list"); </script>
        
          <script>
            current_url = window.location.href;
            option = document.createElement("option");
            option.text = "latest";
            if ( "latest" == "devel" ) {
              option.selected = true;
            }
            if (current_url.search("devel") > -1) {
              option.value = current_url.replace("devel","latest");
            } else {
              option.value = current_url.replace("latest","latest");
            }
            x.add(option);
          </script>
        
          <script>
            current_url = window.location.href;
            option = document.createElement("option");
            option.text = "2.8";
            if ( "2.8" == "devel" ) {
              option.selected = true;
            }
            if (current_url.search("devel") > -1) {
              option.value = current_url.replace("devel","2.8");
            } else {
              option.value = current_url.replace("latest","2.8");
            }
            x.add(option);
          </script>
        
          <script>
            current_url = window.location.href;
            option = document.createElement("option");
            option.text = "2.7";
            if ( "2.7" == "devel" ) {
              option.selected = true;
            }
            if (current_url.search("devel") > -1) {
              option.value = current_url.replace("devel","2.7");
            } else {
              option.value = current_url.replace("latest","2.7");
            }
            x.add(option);
          </script>
        
          <script>
            current_url = window.location.href;
            option = document.createElement("option");
            option.text = "devel";
            if ( "devel" == "devel" ) {
              option.selected = true;
            }
            if (current_url.search("devel") > -1) {
              option.value = current_url.replace("devel","devel");
            } else {
              option.value = current_url.replace("latest","devel");
            }
            x.add(option);
          </script>
        
      </select>
    </div>
  
</div>
          
<div role="search">
<!--  <form id="rtd-search-form" class="wy-form" action="../search.html" -->
  <form id="rtd-search-form" class="wy-form"  method="get">
    <input type="text" class="st-default-search-input" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation, Upgrade &amp; Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation_guide/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../porting_guides/porting_guides.html">Ansible Porting Guides</a></li>
</ul>
<p class="caption"><span class="caption-text">Using Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/index.html">User Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Contributing to Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">Ansible Community Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Extending Ansible</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="developing_locally.html">Adding modules and plugins locally</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules.html">Should you develop a module?</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_general.html">Ansible module development: getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_checklist.html">Contributing your module to Ansible</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_best_practices.html">Conventions, tips, and pitfalls</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_python_3.html">Ansible and Python 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">Debugging modules</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Module format and documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#python-shebang-utf-8-coding">Python shebang &amp; UTF-8 coding</a></li>
<li class="toctree-l3"><a class="reference internal" href="#copyright-and-license">Copyright and license</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ansible-metadata-block">ANSIBLE_METADATA block</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ansible-metadata-fields">Ansible metadata fields</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#documentation-block">DOCUMENTATION block</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#documentation-fields">Documentation fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="#linking-within-module-documentation">Linking within module documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#documentation-fragments">Documentation fragments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#examples-block">EXAMPLES block</a></li>
<li class="toctree-l3"><a class="reference internal" href="#return-block">RETURN block</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python-imports">Python imports</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing-module-documentation">Testing module documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_general_windows.html">Windows module development walkthrough</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_general_aci.html">Developing Cisco ACI modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="platforms/aws_guidelines.html">Guidelines for Ansible Amazon AWS module development</a></li>
<li class="toctree-l2"><a class="reference internal" href="platforms/openstack_guidelines.html">OpenStack Ansible Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="platforms/ovirt_dev_guide.html">oVirt Ansible Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="platforms/vmware_guidelines.html">Guidelines for VMware module development</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_in_groups.html">Information for submitting a group of modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">Testing Ansible</a></li>
<li class="toctree-l2"><a class="reference internal" href="module_lifecycle.html">The lifecycle of an Ansible module</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_plugins.html">Developing plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_inventory.html">Developing dynamic inventory</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_core.html">Developing the Ansible Core Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_program_flow_modules.html">Ansible module architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_api.html">Python API</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_rebasing.html">Rebasing a pull request</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_module_utilities.html">Using and Developing Module Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_collections.html">Developing collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="collections_galaxy_meta.html">Collection Galaxy metadata structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview_architecture.html">Ansible architecture</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Common Ansible Scenarios</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/cloud_guides.html">Public Cloud Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/network_guides.html">Network Technology Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/virt_guides.html">Virtualization and Containerization Guides</a></li>
</ul>
<p class="caption"><span class="caption-text">Network Automation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../network/getting_started/index.html">Network Automation Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network/user_guide/index.html">Network Automation Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network/dev_guide/index.html">Network Automation Developer Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Ansible Galaxy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../galaxy/user_guide.html">Galaxy User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../galaxy/dev_guide.html">Galaxy Developer Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference &amp; Appendices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/modules_by_category.html">Module Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/playbooks_keywords.html">Playbook Keywords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/common_return_values.html">Return Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/config.html">Ansible Configuration Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/general_precedence.html">Controlling how Ansible behaves: precedence rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/YAMLSyntax.html">YAML Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/python_3_support.html">Python 3 Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/interpreter_discovery.html">Interpreter Discovery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/release_and_maintenance.html">Release and maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/test_strategies.html">Testing Strategies</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing/sanity/index.html">Sanity Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/module_utils.html">Ansible Reference: Module Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/special_variables.html">Special Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/tower.html">Red Hat Ansible Tower</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/automationhub.html">Ansible Automation Hub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/logging.html">Logging Ansible output</a></li>
</ul>
<p class="caption"><span class="caption-text">Roadmaps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../roadmap/index.html">Ansible Roadmap</a></li>
</ul>

            
          
        </div>
        
         <!-- extra nav elements for Ansible beyond RTD Sphinx Theme --->
<!-- changeable widget links to tower - do not change as image controlled by Ansible-->
<div id="sideBanner">
  <br/>
  <a href="https://www.ansible.com/docs-left?utm_source=docs">
    <img style="border-width:0px;" src="https://cdn2.hubspot.net/hubfs/330046/docs-graphics/ASB-docs-left-rail.png" />
  </a>
  <br/><br/><br/>
</div>
      </div>
    </nav>
  </div>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Ansible</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          
















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Developer Guide</a> &raquo;</li>
        
      <li>Module format and documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <!-- Ansible-specific additions for modules etc -->
                
                  <a href="https://github.com/ansible/ansible/edit/devel/docs/docsite/rst/dev_guide/developing_modules_documenting.rst?description=%23%23%23%23%23%20SUMMARY%0A%3C!---%20Your%20description%20here%20--%3E%0A%0A%0A%23%23%23%23%23%20ISSUE%20TYPE%0A-%20Docs%20Pull%20Request%0A%0A%2Blabel:%20docsite_pr" class="fa fa-github"> Edit on GitHub</a>
                
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <!--- Based on sphinx versionwarning extension. Extension currently only works on READTHEDOCS -->
  <script>
    // Create a banner if we're not on the official docs site
    if (location.host == "docs.testing.ansible.com") {
      document.write('<div id="testing_banner_id" class="admonition important">');
      para = document.createElement('p');
      banner_text=document.createTextNode("This is a testing site. For the official docs go to https://docs.ansible.com/");
      para.appendChild(banner_text);
      element = document.getElementById('testing_banner_id');
      element.appendChild(para);
      document.write('</div>');
    }

    // Create a banner if we're not the latest version
    current_url = window.location.href;
    if ((current_url.search("latest") > -1) || (current_url.search("/2.9/") > -1)) {
     // no banner for latest release
    } else if (current_url.search("devel") > -1) {
      document.write('<div id="banner_id" class="admonition caution">');
      para = document.createElement('p');
      banner_text=document.createTextNode("You are reading the *devel* version of the Ansible documentation - this version is not guaranteed stable. Use the version selection to the left if you want the latest stable released version.");
      para.appendChild(banner_text);
      element = document.getElementById('banner_id');
      element.appendChild(para);
      document.write('</div>');
    } else {
      document.write('<div id="banner_id" class="admonition caution">');
      para = document.createElement('p');
      banner_text=document.createTextNode("You are reading an older version of the Ansible documentation. Use the version selection to the left if you want the latest stable released version.");
      para.appendChild(banner_text);
      element = document.getElementById('banner_id');
      element.appendChild(para);
      document.write('</div>');
    }
  </script>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-format-and-documentation">
<span id="module-documenting"></span><span id="developing-modules-documenting"></span><h1>Module format and documentation<a class="headerlink" href="#module-format-and-documentation" title="Permalink to this headline">¶</a></h1>
<p>If you want to contribute your module to Ansible, you must write your module in Python and follow the standard format described below. (Unless you’re writing a Windows module, in which case the <a class="reference internal" href="developing_modules_general_windows.html#developing-modules-general-windows"><span class="std std-ref">Windows guidelines</span></a> apply.) In addition to following this format, you should review our <a class="reference internal" href="developing_modules_checklist.html#developing-modules-checklist"><span class="std std-ref">submission checklist</span></a>, <a class="reference internal" href="developing_modules_best_practices.html#developing-modules-best-practices"><span class="std std-ref">programming tips</span></a>, and <a class="reference internal" href="developing_python_3.html#developing-python-3"><span class="std std-ref">strategy for maintaining Python 2 and Python 3 compatibility</span></a>, as well as information about <a class="reference internal" href="testing.html#developing-testing"><span class="std std-ref">testing</span></a> before you open a pull request.</p>
<p>Every Ansible module written in Python must begin with seven standard sections in a particular order, followed by the code. The sections in order are:</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#python-shebang-utf-8-coding" id="id6">Python shebang &amp; UTF-8 coding</a></li>
<li><a class="reference internal" href="#copyright-and-license" id="id7">Copyright and license</a></li>
<li><a class="reference internal" href="#ansible-metadata-block" id="id8">ANSIBLE_METADATA block</a></li>
<li><a class="reference internal" href="#documentation-block" id="id9">DOCUMENTATION block</a></li>
<li><a class="reference internal" href="#examples-block" id="id10">EXAMPLES block</a></li>
<li><a class="reference internal" href="#return-block" id="id11">RETURN block</a></li>
<li><a class="reference internal" href="#python-imports" id="id12">Python imports</a></li>
<li><a class="reference internal" href="#testing-module-documentation" id="id13">Testing module documentation</a></li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Why don’t the imports go first?</p>
<p class="last">Keen Python programmers may notice that contrary to PEP 8’s advice we don’t put <code class="docutils literal notranslate"><span class="pre">imports</span></code> at the top of the file. This is because the <code class="docutils literal notranslate"><span class="pre">ANSIBLE_METADATA</span></code> through <code class="docutils literal notranslate"><span class="pre">RETURN</span></code> sections are not used by the module code itself; they are essentially extra docstrings for the file. The imports are placed after these special variables for the same reason as PEP 8 puts the imports after the introductory comments and docstrings. This keeps the active parts of the code together and the pieces which are purely informational apart. The decision to exclude E402 is based on readability (which is what PEP 8 is about). Documentation strings in a module are much more similar to module level docstrings, than code, and are never utilized by the module itself. Placing the imports below this documentation and closer to the code, consolidates and groups all related code in a congruent manner to improve readability, debugging and understanding.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p><strong>Copy old modules with care!</strong></p>
<p class="last">Some older modules in Ansible Core have <code class="docutils literal notranslate"><span class="pre">imports</span></code> at the bottom of the file, <code class="docutils literal notranslate"><span class="pre">Copyright</span></code> notices with the full GPL prefix, and/or <code class="docutils literal notranslate"><span class="pre">ANSIBLE_METADATA</span></code> fields in the wrong order. These are legacy files that need updating - do not copy them into new modules. Over time we’re updating and correcting older modules. Please follow the guidelines on this page!</p>
</div>
<div class="section" id="python-shebang-utf-8-coding">
<span id="shebang"></span><h2><a class="toc-backref" href="#id6">Python shebang &amp; UTF-8 coding</a><a class="headerlink" href="#python-shebang-utf-8-coding" title="Permalink to this headline">¶</a></h2>
<p>Every Ansible module must begin with <code class="docutils literal notranslate"><span class="pre">#!/usr/bin/python</span></code> - this “shebang” allows <code class="docutils literal notranslate"><span class="pre">ansible_python_interpreter</span></code> to work.
This is immediately followed by <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">-*-</span> <span class="pre">coding:</span> <span class="pre">utf-8</span> <span class="pre">-*-</span></code> to clarify that the file is UTF-8 encoded.</p>
</div>
<div class="section" id="copyright-and-license">
<span id="copyright"></span><h2><a class="toc-backref" href="#id7">Copyright and license</a><a class="headerlink" href="#copyright-and-license" title="Permalink to this headline">¶</a></h2>
<p>After the shebang and UTF-8 coding, there should be a <a class="reference external" href="https://www.gnu.org/licenses/gpl-howto.en.html">copyright line</a> with the original copyright holder and a license declaration. The license declaration should be ONLY one line, not the full GPL prefix.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1"># Copyright: (c) 2018, Terry Jones &lt;terry.jones@example.org&gt;</span>
<span class="c1"># GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)</span>
</pre></div>
</div>
<p>Major additions to the module (for instance, rewrites) may add additional copyright lines. Any legal review will include the source control history, so an exhaustive copyright header is not necessary. When adding a second copyright line for a significant feature or rewrite, add the newer line above the older one:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1"># Copyright: (c) 2017, [New Contributor(s)]</span>
<span class="c1"># Copyright: (c) 2015, [Original Contributor(s)]</span>
<span class="c1"># GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)</span>
</pre></div>
</div>
</div>
<div class="section" id="ansible-metadata-block">
<span id="id1"></span><h2><a class="toc-backref" href="#id8">ANSIBLE_METADATA block</a><a class="headerlink" href="#ansible-metadata-block" title="Permalink to this headline">¶</a></h2>
<p>After the shebang, the UTF-8 coding, the copyright, and the license, your module file should contain an <code class="docutils literal notranslate"><span class="pre">ANSIBLE_METADATA</span></code> section. This section provides information about the module for use by other tools. For new modules, the following block can be simply added into your module:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ANSIBLE_METADATA</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;metadata_version&#39;</span><span class="p">:</span> <span class="s1">&#39;1.1&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;preview&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;supported_by&#39;</span><span class="p">:</span> <span class="s1">&#39;community&#39;</span><span class="p">}</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="last simple">
<li><code class="docutils literal notranslate"><span class="pre">metadata_version</span></code> is the version of the <code class="docutils literal notranslate"><span class="pre">ANSIBLE_METADATA</span></code> schema, <em>not</em> the version of the module.</li>
<li>Promoting a module’s <code class="docutils literal notranslate"><span class="pre">status</span></code> or <code class="docutils literal notranslate"><span class="pre">supported_by</span></code> status should only be done by members of the Ansible Core Team.</li>
</ul>
</div>
<div class="section" id="ansible-metadata-fields">
<h3>Ansible metadata fields<a class="headerlink" href="#ansible-metadata-fields" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">metadata_version:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">An “X.Y” formatted string. X and Y are integers which
define the metadata format version. Modules shipped with Ansible are
tied to an Ansible release, so we will only ship with a single version
of the metadata. We’ll increment Y if we add fields or legal values
to an existing field. We’ll increment X if we remove fields or values
or change the type or meaning of a field.
Current metadata_version is “1.1”</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">supported_by:</th><td class="field-body"><p class="first">Who supports the module.
Default value is <code class="docutils literal notranslate"><span class="pre">community</span></code>. For information on what the support level values entail, please see
<a class="reference internal" href="../user_guide/modules_support.html#modules-support"><span class="std std-ref">Modules Support</span></a>. Values are:</p>
<ul class="simple">
<li>core</li>
<li>network</li>
<li>certified</li>
<li>community</li>
<li>curated (<em>deprecated value - modules in this category should be core or
certified instead</em>)</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">status:</th><td class="field-body"><p class="first">List of strings describing how stable the module is likely to be. See also <a class="reference internal" href="module_lifecycle.html#module-lifecycle"><span class="std std-ref">The lifecycle of an Ansible module</span></a>.
The default value is a single element list [“preview”]. The following strings are valid
statuses and have the following meanings:</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">stableinterface:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">The module’s options (the parameters or arguments it accepts) are stable. Every effort will be made not to remove options or change
their meaning. <strong>Not</strong> a rating of the module’s code quality.</td>
</tr>
<tr class="field-even field"><th class="field-name">preview:</th><td class="field-body">The module is in tech preview. It may be
unstable, the options may change, or it may require libraries or
web services that are themselves subject to incompatible changes.</td>
</tr>
<tr class="field-odd field"><th class="field-name">deprecated:</th><td class="field-body">The module is deprecated and will be removed in a future release.</td>
</tr>
<tr class="field-even field"><th class="field-name">removed:</th><td class="field-body">The module is not present in the release. A stub is
kept so that documentation can be built. The documentation helps
users port from the removed module to new modules.</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="documentation-block">
<span id="id2"></span><h2><a class="toc-backref" href="#id9">DOCUMENTATION block</a><a class="headerlink" href="#documentation-block" title="Permalink to this headline">¶</a></h2>
<p>After the shebang, the UTF-8 coding, the copyright line, the license, and the <code class="docutils literal notranslate"><span class="pre">ANSIBLE_METADATA</span></code> section comes the <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code> block. Ansible’s online module documentation is generated from the <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code> blocks in each module’s source code. The <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code> block must be valid YAML. You may find it easier to start writing your <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code> string in an <a class="reference internal" href="../community/other_tools_and_programs.html#other-tools-and-programs"><span class="std std-ref">editor with YAML syntax highlighting</span></a> before you include it in your Python file. You can start by copying our <a class="reference external" href="https://github.com/ansible/ansible/blob/devel/examples/DOCUMENTATION.yml">example documentation string</a> into your module file and modifying it. If you run into syntax issues in your YAML, you can validate it on the <a class="reference external" href="http://www.yamllint.com/">YAML Lint</a> website.</p>
<dl class="docutils">
<dt>Module documentation should briefly and accurately define what each module and option does, and how it works with others in the underlying system. Documentation should be written for broad audience–readable both by experts and non-experts.</dt>
<dd><ul class="first last simple">
<li>Descriptions should always start with a capital letter and end with a full stop. Consistency always helps.</li>
<li>Verify that arguments in doc and module spec dict are identical.</li>
<li>For password / secret arguments <code class="docutils literal notranslate"><span class="pre">no_log=True</span></code> should be set.</li>
<li>For arguments that seem to contain sensitive information but <strong>do not</strong> contain secrets, such as “password_length”, set <code class="docutils literal notranslate"><span class="pre">no_log=False</span></code> to disable the warning message.</li>
<li>If an option is only sometimes required, describe the conditions. For example, “Required when I(state=present).”</li>
<li>If your module allows <code class="docutils literal notranslate"><span class="pre">check_mode</span></code>, reflect this fact in the documentation.</li>
</ul>
</dd>
</dl>
<p>Each documentation field is described below. Before committing your module documentation, please test it at the command line and as HTML:</p>
<ul class="simple">
<li>As long as your module file is <a class="reference internal" href="developing_locally.html#local-modules"><span class="std std-ref">available locally</span></a>, you can use <code class="docutils literal notranslate"><span class="pre">ansible-doc</span> <span class="pre">-t</span> <span class="pre">module</span> <span class="pre">my_module_name</span></code> to view your module documentation at the command line. Any parsing errors will be obvious - you can view details by adding <code class="docutils literal notranslate"><span class="pre">-vvv</span></code> to the command.</li>
<li>You should also <a class="reference internal" href="testing_documentation.html#testing-module-documentation"><span class="std std-ref">test the HTML output</span></a> of your module documentation.</li>
</ul>
<div class="section" id="documentation-fields">
<h3>Documentation fields<a class="headerlink" href="#documentation-fields" title="Permalink to this headline">¶</a></h3>
<p>All fields in the <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code> block are lower-case. All fields are required unless specified otherwise:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">module:</th><td class="field-body"><ul class="first simple">
<li>The name of the module.</li>
<li>Must be the same as the filename, without the <code class="docutils literal notranslate"><span class="pre">.py</span></code> extension.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">short_description:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li>A short description which is displayed on the <a class="reference internal" href="../modules/list_of_all_modules.html#all-modules"><span class="std std-ref">All modules</span></a> page and <code class="docutils literal notranslate"><span class="pre">ansible-doc</span> <span class="pre">-l</span></code>.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">short_description</span></code> is displayed by <code class="docutils literal notranslate"><span class="pre">ansible-doc</span> <span class="pre">-l</span></code> without any category grouping,
so it needs enough detail to explain the module’s purpose without the context of the directory structure in which it lives.</li>
<li>Unlike <code class="docutils literal notranslate"><span class="pre">description:</span></code>, <code class="docutils literal notranslate"><span class="pre">short_description</span></code> should not have a trailing period/full stop.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">description:</th><td class="field-body"><ul class="first simple">
<li>A detailed description (generally two or more sentences).</li>
<li>Must be written in full sentences, i.e. with capital letters and periods/full stops.</li>
<li>Shouldn’t mention the module name.</li>
<li>Make use of multiple entries rather than using one long paragraph.</li>
<li>Don’t quote complete values unless it is required by YAML.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">version_added:</th><td class="field-body"><ul class="first simple">
<li>The version of Ansible when the module was added.</li>
<li>This is a string, and not a float, i.e. <code class="docutils literal notranslate"><span class="pre">version_added:</span> <span class="pre">'2.1'</span></code></li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body"><ul class="first simple">
<li>Name of the module author in the form <code class="docutils literal notranslate"><span class="pre">First</span> <span class="pre">Last</span> <span class="pre">(&#64;GitHubID)</span></code>.</li>
<li>Use a multi-line list if there is more than one author.</li>
<li>Don’t use quotes as it should not be required by YAML.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">deprecated:</th><td class="field-body"><ul class="first simple">
<li>Marks modules that will be removed in future releases. See also <a class="reference internal" href="module_lifecycle.html#module-lifecycle"><span class="std std-ref">The lifecycle of an Ansible module</span></a>.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">options:</th><td class="field-body"><ul class="first simple">
<li>Options are often called <cite>parameters</cite> or <cite>arguments</cite>. Because the documentation field is called <cite>options</cite>, we will use that term.</li>
<li>If the module has no options (for example, it’s a <code class="docutils literal notranslate"><span class="pre">_facts</span></code> module), all you need is one line: <code class="docutils literal notranslate"><span class="pre">options:</span> <span class="pre">{}</span></code>.</li>
<li>If your module has options (in other words, accepts arguments), each option should be documented thoroughly. For each module option, include:</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">option-name:</th><td class="field-body"><ul class="first simple">
<li>Declarative operation (not CRUD), to focus on the final state, for example <cite>online:</cite>, rather than <cite>is_online:</cite>.</li>
<li>The name of the option should be consistent with the rest of the module, as well as other modules in the same category.</li>
<li>When in doubt, look for other modules to find option names that are used for the same purpose, we like to offer consistency to our users.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">description:</th><td class="field-body"><ul class="first simple">
<li>Detailed explanation of what this option does. It should be written in full sentences.</li>
<li>The first entry is a description of the option itself; subsequent entries detail its use, dependencies, or format of possible values.</li>
<li>Should not list the possible values (that’s what <code class="docutils literal notranslate"><span class="pre">choices:</span></code> is for, though it should explain what the values do if they aren’t obvious).</li>
<li>If an option is only sometimes required, describe the conditions. For example, “Required when I(state=present).”</li>
<li>Mutually exclusive options must be documented as the final sentence on each of the options.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">required:</th><td class="field-body"><ul class="first simple">
<li>Only needed if <code class="docutils literal notranslate"><span class="pre">true</span></code>.</li>
<li>If missing, we assume the option is not required.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">default:</th><td class="field-body"><ul class="first simple">
<li>If <code class="docutils literal notranslate"><span class="pre">required</span></code> is false/missing, <code class="docutils literal notranslate"><span class="pre">default</span></code> may be specified (assumed ‘null’ if missing).</li>
<li>Ensure that the default value in the docs matches the default value in the code.</li>
<li>The default field must not be listed as part of the description, unless it requires additional information or conditions.</li>
<li>If the option is a boolean value, you can use any of the boolean values recognized by Ansible:
(such as true/false or yes/no).  Choose the one that reads better in the context of the option.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">choices:</th><td class="field-body"><ul class="first simple">
<li>List of option values.</li>
<li>Should be absent if empty.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">type:</th><td class="field-body"><ul class="first simple">
<li>Specifies the data type that option accepts, must match the <code class="docutils literal notranslate"><span class="pre">argspec</span></code>.</li>
<li>If an argument is <code class="docutils literal notranslate"><span class="pre">type='bool'</span></code>, this field should be set to <code class="docutils literal notranslate"><span class="pre">type:</span> <span class="pre">bool</span></code> and no <code class="docutils literal notranslate"><span class="pre">choices</span></code> should be specified.</li>
<li>If an argument is <code class="docutils literal notranslate"><span class="pre">type='list'</span></code>, <code class="docutils literal notranslate"><span class="pre">elements</span></code> should be specified.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">elements:</th><td class="field-body"><ul class="first simple">
<li>Specifies the data type for list elements in case <code class="docutils literal notranslate"><span class="pre">type='list'</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">aliases:</th><td class="field-body"><ul class="first simple">
<li>List of optional name aliases.</li>
<li>Generally not needed.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">version_added:</th><td class="field-body"><ul class="first simple">
<li>Only needed if this option was extended after initial Ansible release, i.e. this is greater than the top level <cite>version_added</cite> field.</li>
<li>This is a string, and not a float, i.e. <code class="docutils literal notranslate"><span class="pre">version_added:</span> <span class="pre">'2.3'</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">suboptions:</th><td class="field-body"><ul class="first last simple">
<li>If this option takes a dict or list of dicts, you can define the structure here.</li>
<li>See <a class="reference external" href="https://docs.ansible.com/ansible/2.9/modules/azure_rm_securitygroup_module.html#azure-rm-securitygroup-module" title="(in Ansible v2.9)"><span>azure_rm_securitygroup – Manage Azure network security groups</span></a>, <a class="reference external" href="https://docs.ansible.com/ansible/2.9/modules/azure_rm_azurefirewall_module.html#azure-rm-azurefirewall-module" title="(in Ansible v2.9)"><span>azure_rm_azurefirewall – Manage Azure Firewall instance</span></a> and <a class="reference external" href="https://docs.ansible.com/ansible/2.9/modules/os_ironic_node_module.html#os-ironic-node-module" title="(in Ansible v2.9)"><span>os_ironic_node – Activate/Deactivate Bare Metal Resources from OpenStack</span></a> for examples.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">requirements:</th><td class="field-body"><ul class="first simple">
<li>List of requirements (if applicable).</li>
<li>Include minimum versions.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">seealso:</th><td class="field-body"><ul class="first">
<li><p class="first">A list of references to other modules, documentation or Internet resources</p>
</li>
<li><p class="first">A reference can be one of the following formats:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">seealso</span><span class="p p-Indicator">:</span>

<span class="c1"># Reference by module name</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">module</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">aci_tenant</span>

<span class="c1"># Reference by module name, including description</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">module</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">aci_tenant</span>
  <span class="l l-Scalar l-Scalar-Plain">description</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ACI module to create tenants on a Cisco ACI fabric.</span>

<span class="c1"># Reference by rST documentation anchor</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ref</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">aci_guide</span>
  <span class="l l-Scalar l-Scalar-Plain">description</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Detailed information on how to manage your ACI infrastructure using Ansible.</span>

<span class="c1"># Reference by Internet resource</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">APIC Management Information Model reference</span>
  <span class="l l-Scalar l-Scalar-Plain">description</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Complete reference of the APIC object model.</span>
  <span class="l l-Scalar l-Scalar-Plain">link</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">https://developer.cisco.com/docs/apic-mim-ref/</span>
</pre></div>
</div>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">notes:</th><td class="field-body"><ul class="first last simple">
<li>Details of any important information that doesn’t fit in one of the above sections.</li>
<li>For example, whether <code class="docutils literal notranslate"><span class="pre">check_mode</span></code> is or is not supported.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="linking-within-module-documentation">
<h3>Linking within module documentation<a class="headerlink" href="#linking-within-module-documentation" title="Permalink to this headline">¶</a></h3>
<p>You can link from your module documentation to other module docs, other resources on docs.ansible.com, and resources elsewhere on the internet. The correct formats for these links are:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">L()</span></code> for Links with a heading. For example: <code class="docutils literal notranslate"><span class="pre">See</span> <span class="pre">L(IOS</span> <span class="pre">Platform</span> <span class="pre">Options</span> <span class="pre">guide,../network/user_guide/platform_ios.html).</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">U()</span></code> for URLs. For example: <code class="docutils literal notranslate"><span class="pre">See</span> <span class="pre">U(https://www.ansible.com/products/tower)</span> <span class="pre">for</span> <span class="pre">an</span> <span class="pre">overview.</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">I()</span></code> for option names. For example: <code class="docutils literal notranslate"><span class="pre">Required</span> <span class="pre">if</span> <span class="pre">I(state=present).</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">C()</span></code> for files and option values. For example: <code class="docutils literal notranslate"><span class="pre">If</span> <span class="pre">not</span> <span class="pre">set</span> <span class="pre">the</span> <span class="pre">environment</span> <span class="pre">variable</span> <span class="pre">C(ACME_PASSWORD)</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">used.</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">M()</span></code> for module names. For example: <code class="docutils literal notranslate"><span class="pre">See</span> <span class="pre">also</span> <span class="pre">M(win_copy)</span> <span class="pre">or</span> <span class="pre">M(win_template).</span></code></li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For modules in a collection, you can only use <code class="docutils literal notranslate"><span class="pre">L()</span></code> and <code class="docutils literal notranslate"><span class="pre">M()</span></code> for content within that collection. Use <code class="docutils literal notranslate"><span class="pre">U()</span></code> to refer to content in a different collection.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>To refer a group of modules, use <code class="docutils literal notranslate"><span class="pre">C(..)</span></code>, e.g. <code class="docutils literal notranslate"><span class="pre">Refer</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">C(win_*)</span> <span class="pre">modules.</span></code></li>
<li>Because it stands out better, using <code class="docutils literal notranslate"><span class="pre">seealso</span></code> is preferred for general references over the use of notes or adding links to the description.</li>
</ul>
</div>
</div>
<div class="section" id="documentation-fragments">
<span id="module-docs-fragments"></span><h3>Documentation fragments<a class="headerlink" href="#documentation-fragments" title="Permalink to this headline">¶</a></h3>
<p>If you’re writing multiple related modules, they may share common documentation, such as authentication details, file mode settings, <code class="docutils literal notranslate"><span class="pre">notes:</span></code> or <code class="docutils literal notranslate"><span class="pre">seealso:</span></code> entries. Rather than duplicate that information in each module’s <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code> block, you can save it once as a doc_fragment plugin and use it in each module’s documentation. In Ansible, shared documentation fragments are contained in a <code class="docutils literal notranslate"><span class="pre">ModuleDocFragment</span></code> class in <a class="reference external" href="https://github.com/ansible/ansible/tree/devel/lib/ansible/plugins/doc_fragments">lib/ansible/plugins/doc_fragments/</a>. To include a documentation fragment, add <code class="docutils literal notranslate"><span class="pre">extends_documentation_fragment:</span> <span class="pre">FRAGMENT_NAME</span></code> in your module’s documentation.</p>
<p>Modules should only use items from a doc fragment if the module will implement all of the interface documented there in a manner that behaves the same as the existing modules which import that fragment. The goal is that items imported from the doc fragment will behave identically when used in another module that imports the doc fragment.</p>
<p>By default, only the <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code> property from a doc fragment is inserted into the module documentation. It is possible to define additional properties in the doc fragment in order to import only certain parts of a doc fragment or mix and match as appropriate. If a property is defined in both the doc fragment and the module, the module value overrides the doc fragment.</p>
<p>Here is an example doc fragment named <code class="docutils literal notranslate"><span class="pre">example_fragment.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ModuleDocFragment</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="c1"># Standard documentation</span>
    <span class="n">DOCUMENTATION</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    options:</span>
<span class="s1">      # options here</span>
<span class="s1">    &#39;&#39;&#39;</span>

    <span class="c1"># Additional section</span>
    <span class="n">OTHER</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    options:</span>
<span class="s1">      # other options here</span>
<span class="s1">    &#39;&#39;&#39;</span>
</pre></div>
</div>
<p>To insert the contents of <code class="docutils literal notranslate"><span class="pre">OTHER</span></code> in a module:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">extends_documentation_fragment</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">example_fragment.other</span>
</pre></div>
</div>
<p>Or use both :</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">extends_documentation_fragment</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">example_fragment</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">example_fragment.other</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.8.</span></p>
</div>
<p>Since Ansible 2.8, you can have user-supplied doc_fragments by using a <code class="docutils literal notranslate"><span class="pre">doc_fragments</span></code> directory adjacent to play or role, just like any other plugin.</p>
<p>For example, all AWS modules should include:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">extends_documentation_fragment</span><span class="p p-Indicator">:</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">aws</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ec2</span>
</pre></div>
</div>
<p><a class="reference internal" href="developing_collections.html#docfragments-collections"><span class="std std-ref">Using documentation fragments in collections</span></a> describes how to incorporate documentation fragments in a collection.</p>
</div>
</div>
<div class="section" id="examples-block">
<span id="id3"></span><h2><a class="toc-backref" href="#id10">EXAMPLES block</a><a class="headerlink" href="#examples-block" title="Permalink to this headline">¶</a></h2>
<p>After the shebang, the UTF-8 coding, the copyright line, the license, the <code class="docutils literal notranslate"><span class="pre">ANSIBLE_METADATA</span></code> section, and the <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code> block comes the <code class="docutils literal notranslate"><span class="pre">EXAMPLES</span></code> block. Here you show users how your module works with real-world examples in multi-line plain-text YAML format. The best examples are ready for the user to copy and paste into a playbook. Review and update your examples with every change to your module.</p>
<p>Per playbook best practices, each example should include a <code class="docutils literal notranslate"><span class="pre">name:</span></code> line:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">EXAMPLES = r&#39;&#39;&#39;</span>
<span class="l l-Scalar l-Scalar-Plain">- name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Ensure foo is installed</span>
  <span class="l l-Scalar l-Scalar-Plain">modulename</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">foo</span>
    <span class="l l-Scalar l-Scalar-Plain">state</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">present</span>
<span class="s">&#39;</span><span class="se">&#39;&#39;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">name:</span></code> line should be capitalized and not include a trailing dot.</p>
<p>If your examples use boolean options, use yes/no values. Since the documentation generates boolean values as yes/no, having the examples use these values as well makes the module documentation more consistent.</p>
<p>If your module returns facts that are often needed, an example of how to use them can be helpful.</p>
</div>
<div class="section" id="return-block">
<span id="id4"></span><h2><a class="toc-backref" href="#id11">RETURN block</a><a class="headerlink" href="#return-block" title="Permalink to this headline">¶</a></h2>
<p>After the shebang, the UTF-8 coding, the copyright line, the license, the <code class="docutils literal notranslate"><span class="pre">ANSIBLE_METADATA</span></code> section, <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code> and <code class="docutils literal notranslate"><span class="pre">EXAMPLES</span></code> blocks comes the <code class="docutils literal notranslate"><span class="pre">RETURN</span></code> block. This section documents the information the module returns for use by other modules.</p>
<p>If your module doesn’t return anything (apart from the standard returns), this section of your module should read: <code class="docutils literal notranslate"><span class="pre">RETURN</span> <span class="pre">=</span> <span class="pre">r'''</span> <span class="pre">#</span> <span class="pre">'''</span></code>
Otherwise, for each value returned, provide the following fields. All fields are required unless specified otherwise.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">return name:</th><td class="field-body"><p class="first">Name of the returned field.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">description:</th><td class="field-body">Detailed description of what this value represents. Capitalized and with trailing dot.</td>
</tr>
<tr class="field-even field"><th class="field-name">returned:</th><td class="field-body">When this value is returned, such as <code class="docutils literal notranslate"><span class="pre">always</span></code>, <code class="docutils literal notranslate"><span class="pre">changed</span></code> or <code class="docutils literal notranslate"><span class="pre">success</span></code>. This is a string and can contain any human-readable content.</td>
</tr>
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">Data type.</td>
</tr>
<tr class="field-even field"><th class="field-name">elements:</th><td class="field-body">If <code class="docutils literal notranslate"><span class="pre">type='list'</span></code>, specifies the data type of the list’s elements.</td>
</tr>
<tr class="field-odd field"><th class="field-name">sample:</th><td class="field-body">One or more examples.</td>
</tr>
<tr class="field-even field"><th class="field-name">version_added:</th><td class="field-body">Only needed if this return was extended after initial Ansible release, i.e. this is greater than the top level <cite>version_added</cite> field.
This is a string, and not a float, i.e. <code class="docutils literal notranslate"><span class="pre">version_added:</span> <span class="pre">'2.3'</span></code>.</td>
</tr>
<tr class="field-odd field"><th class="field-name">contains:</th><td class="field-body">Optional. To describe nested return values, set <code class="docutils literal notranslate"><span class="pre">type:</span> <span class="pre">complex</span></code>, <code class="docutils literal notranslate"><span class="pre">type:</span> <span class="pre">dict</span></code>, or <code class="docutils literal notranslate"><span class="pre">type:</span> <span class="pre">list</span></code>/<code class="docutils literal notranslate"><span class="pre">elements:</span> <span class="pre">dict</span></code> and repeat the elements above for each sub-field.</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>Here are two example <code class="docutils literal notranslate"><span class="pre">RETURN</span></code> sections, one with three simple fields and one with a complex nested field:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">RETURN = r&#39;&#39;&#39;</span>
<span class="l l-Scalar l-Scalar-Plain">dest</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">description</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Destination file/path.</span>
    <span class="l l-Scalar l-Scalar-Plain">returned</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">success</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">str</span>
    <span class="l l-Scalar l-Scalar-Plain">sample</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/file.txt</span>
<span class="l l-Scalar l-Scalar-Plain">src</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">description</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Source file used for the copy on the target machine.</span>
    <span class="l l-Scalar l-Scalar-Plain">returned</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">changed</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">str</span>
    <span class="l l-Scalar l-Scalar-Plain">sample</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/home/httpd/.ansible/tmp/ansible-tmp-1423796390.97-147729857856000/source</span>
<span class="l l-Scalar l-Scalar-Plain">md5sum</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">description</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">MD5 checksum of the file after running copy.</span>
    <span class="l l-Scalar l-Scalar-Plain">returned</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">when supported</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">str</span>
    <span class="l l-Scalar l-Scalar-Plain">sample</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">2a5aeecc61dc98c4d780b14b330e3282</span>
<span class="s">&#39;</span><span class="se">&#39;&#39;</span>

<span class="s">RETURN</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">r</span><span class="se">&#39;&#39;</span><span class="s">&#39;</span>
<span class="l l-Scalar l-Scalar-Plain">packages</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">description</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Information about package requirements</span>
    <span class="l l-Scalar l-Scalar-Plain">returned</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">success</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">complex</span>
    <span class="l l-Scalar l-Scalar-Plain">contains</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">missing</span><span class="p p-Indicator">:</span>
            <span class="l l-Scalar l-Scalar-Plain">description</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Packages that are missing from the system</span>
            <span class="l l-Scalar l-Scalar-Plain">returned</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">success</span>
            <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">list</span>
            <span class="l l-Scalar l-Scalar-Plain">sample</span><span class="p p-Indicator">:</span>
                <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">libmysqlclient-dev</span>
                <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">libxml2-dev</span>
        <span class="l l-Scalar l-Scalar-Plain">badversion</span><span class="p p-Indicator">:</span>
            <span class="l l-Scalar l-Scalar-Plain">description</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Packages that are installed but at bad versions.</span>
            <span class="l l-Scalar l-Scalar-Plain">returned</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">success</span>
            <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">list</span>
            <span class="l l-Scalar l-Scalar-Plain">sample</span><span class="p p-Indicator">:</span>
                <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">package</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">libxml2-dev</span>
                  <span class="l l-Scalar l-Scalar-Plain">version</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">2.9.4+dfsg1-2</span>
                  <span class="l l-Scalar l-Scalar-Plain">constraint</span><span class="p p-Indicator">:</span> <span class="s">&quot;&gt;=</span><span class="nv"> </span><span class="s">3.0&quot;</span>
<span class="s">&#39;</span><span class="se">&#39;&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="python-imports">
<span id="id5"></span><h2><a class="toc-backref" href="#id12">Python imports</a><a class="headerlink" href="#python-imports" title="Permalink to this headline">¶</a></h2>
<p>After the shebang, the UTF-8 coding, the copyright line, the license, and the sections for <code class="docutils literal notranslate"><span class="pre">ANSIBLE_METADATA</span></code>, <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code>, <code class="docutils literal notranslate"><span class="pre">EXAMPLES</span></code>, and <code class="docutils literal notranslate"><span class="pre">RETURN</span></code>, you can finally add the python imports. All modules must use Python imports in the form:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">module_utils.basic</span> <span class="kn">import</span> <span class="n">AnsibleModule</span>
</pre></div>
</div>
<p>The use of “wildcard” imports such as <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">module_utils.basic</span> <span class="pre">import</span> <span class="pre">*</span></code> is no longer allowed.</p>
</div>
<div class="section" id="testing-module-documentation">
<span id="dev-testing-module-documentation"></span><h2><a class="toc-backref" href="#id13">Testing module documentation</a><a class="headerlink" href="#testing-module-documentation" title="Permalink to this headline">¶</a></h2>
<p>To test Ansible documentation locally please <a class="reference internal" href="testing_documentation.html#testing-module-documentation"><span class="std std-ref">follow instruction</span></a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons">
      
        <a href="developing_modules_general_windows.html" class="btn btn-neutral float-right" title="Windows module development walkthrough"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="debugging.html" class="btn btn-neutral" title="Debugging modules"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>


<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','yABGvz2N8PwcwBxyfzUc','2.0.0');
</script>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019 Red Hat, Inc.
      <span class="lastupdated">
        Last updated on Aug 10, 2020.
      </span>

    </p>
  </div> 
</footer>
        </div>
      </div>

    </section>

  </div>

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script>

  
  
    
   <!-- extra footer elements for Ansible beyond RTD Sphinx Theme --->
<!-- begin analytics -->
<script type="text/javascript">
var _hsq = _hsq || [];
_hsq.push(["setContentType", "standard-page"]);
      (function(d,s,i,r) {
      if (d.getElementById(i)){return;}
      var n = d.createElement(s),e = document.getElementsByTagName(s)[0];
      n.id=i;n.src = '//js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/330046.js';
      e.parentNode.insertBefore(n, e);
      })(document, "script", "hs-analytics",300000);
</script>
<!-- end analytics -->
<script type="text/javascript">
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
  _satellite.pageBottom();
}
</script> 

</body>
</html>